# Aquifer depletion exacerbates agricultural drought losses in the US High Plains (Nature Water)

## Instruction for Reproducing the Results and Figures

Here is the breakdown of the steps of completing the project.

1. Download and process datasets
2. Combine the process datasets
3. Conduct analysis and create figures
4. Produce the manuscript

## Step 1:

Create a root folder (the folder that will have all the folders and files). You can name it however you want. Inside the root folder, create a folder named "Results."

## Step 2:

Download the computer programs from the [GitHub repository](https://github.com/tmieno2/Drought-Production-Risk-Aquifer) (https://github.com/tmieno2/Drought-Production-Risk-Aquifer). You can either clone or download the files as a zipped folder into the root folder. If done correctly, the folder system looks like this.

![folder-structure](https://github.com/tmieno2/Drought-Production-Risk-Aquifer/blob/master/Misc/folder-structure.png)

## Step 2: download datasets

Datasets for this project are stored in two separate places. 

1. figshare (DOI: 10.6084/m9.figshare.24492196)
2. [Dropbox folder](https://www.dropbox.com/scl/fo/bghhwlidmi7wx1ok0az5n/h?rlkey=tgbix1hp7g9np9etlo1z3biyr&dl=0)

Which one to use depends on the depth of reproduction you would like to achieve.  

The figshare data repository is the "official" data storage for the article. However, due to file number and size limitations, not all the files generated by the computer programs were uploaded in this repository. Please see metadata.html in the repository for the full list of datasets that were generated in the research project. Specifically, daily gridMET datasets, saturated thickness data by year, and SSURGO data for individual counties are not available in this repository. Please note that all the essential datasets to produce the results and figures reported in the article are still available in this repository. That is, you can go through steps 2, 3, and 4 using the datasets from this repository. However, our research project save the files provided in this repository separately in two folders (**data-raw** and **data-processed**), and our computer programs assume this file structure. Therefore, you either need to create the folders with the same name yourself and place right files in the right folder to run our codes or you need to modify the file paths in our codes. 

The Dropbox folder has all the datasets used in the project including the raw datasets and metadata. Moreover, it preserves the folder structure and file placement as done in our implementation of the project. Therefore, you do not have the aforementioned hassle associated with the use of the figshare repository. For those who are interested in going through only steps 2, 3, and 4, you can just download **data-processed** folder. If you would like to reproduce from the beginning to the end (steps 1 through 4), then you should download **data-raw** folder. Note that you do not necessarily have to download the **gridMET** folder, which has daily weather data files by variable-year and is by far the biggest in size (approximately 37GB). This is because there is a code segment in our computer programs that downloads these data. If you would like to avoid this lengthy process, you can just download the folder as long as you are okay with its size.